<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Student Dashboard</title>

<style>
:root{
  --bg:#020617;
  --card:#0f172a;
  --accent:#38bdf8;
  --muted:#94a3b8;
  font-family:Inter,system-ui;
}
body{
  margin:0;
  background:radial-gradient(circle at top,#020617,#000);
  color:white;
}
.container{
  max-width:1000px;
  margin:auto;
  padding:40px 16px;
}
.card{
  background:linear-gradient(180deg,#0f172a,#020617);
  border:1px solid #1e293b;
  border-radius:16px;
  padding:24px;
  margin-bottom:24px;
}
input,button{
  padding:14px;
  border-radius:10px;
  border:none;
  font-size:15px;
}
input{
  width:80%;
  background:#020617;
  color:white;
  border:1px solid #1e293b;
}
button{
  background:linear-gradient(90deg,#38bdf8,#22d3ee);
  font-weight:600;
  cursor:pointer;
}
.grid{
  display:grid;
  background:linear-gradient(90deg,#38bdf8,#22d3ee);
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:18px;
}
.label{color:var(--muted);font-size:13px}
.value{font-weight:600}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

  <!-- SEARCH -->
  <div class="card">
    <h2>Student Dashboard</h2>
    <form id="form">
      <input id="regid" placeholder="Registration Number" required>
      <br><br>
      <button>View Details</button>
    </form>
  </div>

  <!-- STUDENT INFO -->
  <div id="info" class="card hidden">
    <h3>Student Information</h3>
    <div id="details" class="grid"></div>
  </div>

  <!-- ATTENDANCE -->
  <div id="attendanceCard" class="card hidden">
    <h3>Attendance</h3>
    <div id="attendance"></div>
  </div>
</div>
  <footer style="
  text-align:center;
  margin-top:40px;
  padding:16px 0;
  font-size:13px;
  color:#94a3b8;
  border-top:1px solid #1e293b;
">
  Credits swarnandhra.ac.in Â· Developed by <strong>Vinay</strong>
  </footer>
  

<script>
const form = document.getElementById("form");
const regid = document.getElementById("regid");
const info = document.getElementById("info");
const detailsDiv = document.getElementById("details");
const attendanceDiv = document.getElementById("attendance");
const attendanceCard = document.getElementById("attendanceCard");

form.addEventListener("submit", async e => {
  e.preventDefault();
  detailsDiv.innerHTML = "Loading...";
  attendanceDiv.innerHTML = "Loading...";
  info.classList.remove("hidden");
  attendanceCard.classList.remove("hidden");

  const res = await fetch("/student", {
    method:"POST",
    headers:{ "Content-Type":"application/x-www-form-urlencoded" },
    body:new URLSearchParams({ regid: regid.value.trim() })
  });

  const data = await res.json();
  if(data.error){
    detailsDiv.innerHTML = data.error;
    return;
  }

  detailsDiv.innerHTML = "";
  for(const [k,v] of Object.entries(data.details)){
    detailsDiv.innerHTML += `
      <div>
        <div class="label">${k.toUpperCase()}</div>
        <div class="value">${v}</div>
      </div>`;
  }

  attendanceDiv.innerHTML = data.attendance;
});
</script>

</body>
</html>
