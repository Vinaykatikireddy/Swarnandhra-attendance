<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Student Attendance Viewer by 05n0</title>

<style>
:root{
  --bg:#0f172a;
  --card:#0b1220;
  --accent:#6ee7b7;
  --muted:#94a3b8;
  --glass:rgba(255,255,255,.04);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
html,body{
  margin:0;height:100%;
  background:linear-gradient(180deg,#071029,#0b1220);
  color:#e6eef8;
}
.wrap{
  min-height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 16px;
}
.card{
  width:100%;
  max-width:900px;
  background:linear-gradient(180deg,var(--card),#0b1220cc);
  border-radius:16px;
  padding:32px;
  border:1px solid var(--glass);
}
form{display:flex;gap:10px}
input,button{
  padding:14px;
  border-radius:10px;
  border:none;
}
input{
  flex:1;
}
button{
  background:linear-gradient(90deg,var(--accent),#34d399);
  font-weight:600;
  cursor:pointer;
}
.result{
  margin-top:20px;
  min-height:120px;
}
.center{color:var(--muted)}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <h2>Student Attendance Viewer</h2>

    <form id="form">
      <input id="regid" placeholder="Registration Number" required>
      <button type="submit">Fetch</button>
    </form>

    <div id="result" class="result">
      <div class="center">No data yet</div>
    </div>
  </div>
</div>

<script>
const form   = document.getElementById("form");
const result = document.getElementById("result");
const regid  = document.getElementById("regid");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  result.innerHTML = "<div class='center'>Loading...</div>";

  try {
    const res = await fetch("/attendance", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: new URLSearchParams({
        regid: regid.value.trim(),
        semester: "Fourth Semester"
      })
    });

    result.innerHTML = await res.text();
  } catch {
    result.innerHTML = "<div class='center'>Request failed</div>";
  }
});
</script>

</body>
</html>
